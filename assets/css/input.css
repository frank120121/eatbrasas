/* assets/css/input.css */

@tailwind base;
@tailwind components;
@tailwind utilities;

/* ===== BASE LAYER - Accessibility & Fundamentals ===== */
@layer base {
  /* Accessibility: Respect user's motion preferences */
  @media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }
    
    .fade-in,
    .hover-lift,
    .shine {
      @apply transition-none;
    }

    .header-auto-hide {
      transition: none !important;
    }
  }
  
  /* High contrast mode support */
  @media (prefers-contrast: high) {
    .btn {
      @apply border-2 border-current;
    }
    
    .product-card {
      @apply border-2 border-gray-800;
    }
    
    .text-gradient {
      @apply text-primary bg-none;
    }
  }

  /* Screen reader utilities */
  .sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
  }

  .sr-only:focus {
    position: static;
    width: auto;
    height: auto;
    padding: 0.5rem 1rem;
    margin: 0;
    overflow: visible;
    clip: auto;
    white-space: normal;
    @apply bg-primary text-white font-bold z-50;
  }
}

/* ===== COMPONENT LAYER - Reusable Components ===== */

@layer components {
  /* Base Navigation */
  .nav-link {
    @apply text-gray-700 font-bold text-sm uppercase tracking-wider;
    @apply px-2 py-1 rounded-md transition-colors duration-300;
    @apply hover:text-primary focus:text-primary;
    @apply focus:outline-none focus:ring-2 focus:ring-primary focus:ring-opacity-50 focus:ring-offset-2;
  }

  .nav-link.active {
    @apply text-primary;
  }

  /* Base Button Styles */
  .btn {
    @apply bg-primary text-white font-bold uppercase tracking-wider;
    @apply px-12 py-4 rounded-md transition-all duration-300;
    @apply hover:bg-primary-dark hover:-translate-y-0.5;
    @apply focus:outline-none focus:ring-2 focus:ring-primary focus:ring-opacity-50 focus:ring-offset-2;
  }

  .btn-secondary {
    @apply bg-transparent border-2 border-brown text-brown font-bold uppercase tracking-wider;
    @apply px-8 py-3 rounded-md transition-all duration-300;
    @apply hover:bg-brown hover:text-white;
    @apply focus:outline-none focus:ring-2 focus:ring-brown focus:ring-opacity-50 focus:ring-offset-2;
  }

  /* Skip link for accessibility */
  .skip-link {
    @apply sr-only focus:not-sr-only fixed top-4 left-4 bg-primary text-white;
    @apply px-4 py-2 rounded-md font-bold z-50 transition-all duration-200;
  }

  /* Card Components */
  .hover-lift {
    @apply transition-all duration-300 hover:-translate-y-2;
    box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
  }
  
  .hover-lift:hover {
    box-shadow: 0 20px 40px -10px rgba(0, 0, 0, 0.15), 0 10px 20px -5px rgba(0, 0, 0, 0.1);
  }

  .product-card {
    @apply bg-white shadow-lg rounded-3xl transition-all duration-300;
  }

  /* Text Effects - Updated with new gradient */
  .text-gradient {
    background: linear-gradient(135deg, #f59e0b, #ea580c);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    @apply bg-clip-text text-transparent;
  }

  /* Animation Classes */
  .fade-in {
    opacity: 1;
    transform: translateY(0);
    visibility: visible;
    transition: opacity 0.6s ease-out, transform 0.6s ease-out;
  }
  
  .fade-in.animate-on-scroll {
    opacity: 0;
    transform: translateY(20px);
  }
  .fade-in.animate-on-scroll.visible {
    opacity: 1;
    transform: translateY(0);
  }
  /* Fallback: If no JavaScript, show everything after 2 seconds */
  .no-js .fade-in.animate-on-scroll {
    animation: auto-show 0.1s ease-out 2s forwards;
  }
  
  @keyframes auto-show {
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  /* Ensure critical elements are always visible */
  #menu,
  #location,
  #contacto,
  .product-card,
  .category-preview-card {
    display: block;
    visibility: visible;
    opacity: 1;
  }
  
  /* Safe image loading */
  img {
    opacity: 1;
    visibility: visible;
    display: block;
    transition: opacity 0.3s ease;
  }
  
  /* Only hide images that are explicitly being lazy-loaded */
  img.lazy-loading {
    opacity: 0.7;
  }
  
  img.lazy-loaded {
    opacity: 1;
  }
  
  /* Ensure grid layouts work */
  #categories-grid {
    display: grid !important;
    opacity: 1;
    visibility: visible;
  }
  /* Enhanced Shine Effect */
  .shine {
    @apply relative overflow-hidden;
  }
  
  .shine::before {
    content: '';
    @apply absolute inset-0;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
    left: -100%;
    transition: left 0.5s ease-in-out;
  }
  
  .shine:hover::before {
    left: 100%;
  }

  /* Glass Effects */
  .glass {
    @apply bg-white/10 backdrop-blur-sm border border-white/10;
  }

  .glass-dark {
    @apply bg-black/30 backdrop-blur-xl border border-white/10;
  }
  /* Header Auto-Hide Component */
  .header-auto-hide {
    @apply fixed top-0 left-0 right-0 z-50 w-full;
    transition: opacity 0.3s ease-in-out, transform 0.3s ease-in-out;
  }

  /* Header visibility states - controlled by JavaScript */
  .header-auto-hide.header-hidden {
    transform: translateY(-100%);
    @apply opacity-0;
  }

  .header-auto-hide.header-visible {
    transform: translateY(0);
    @apply opacity-100;
  }

  /* Ensure header shows scrolled state when visible */
  .header-auto-hide.header-visible.header-scrolled {
    @apply bg-white/95 backdrop-blur-xl shadow-lg border-b border-gray-200;
  }

  /* Override for mobile menu - always show header when menu is open */
  .header-auto-hide.mobile-menu-open {
    transform: translateY(0) !important;
    @apply opacity-100 !important;
  }
  /* Header Styles */
  .header-scrolled {
    @apply bg-white/95 backdrop-blur-xl shadow-lg border-b border-gray-200;
  }

  .location-picker, .user-actions {
    @apply flex items-center gap-2 text-brown px-2 py-1 rounded-lg cursor-pointer;
    @apply transition-all duration-300 hover:text-primary hover:bg-gray-50;
    @apply focus:outline-none focus:ring-2 focus:ring-primary focus:ring-opacity-50 focus:ring-offset-1;
  }


  /* Mobile Menu */
  .mobile-menu {
    @apply transform translate-x-full transition-transform duration-300 ease-in-out;
  }
  
  .mobile-menu.show {
    @apply translate-x-0;
  }

  /* ===== MENU COMPONENTS ===== */

  /* Custom scrollbar hiding for horizontal nav */
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }

  /* Menu category navigation */
  .category-nav-btn {
    @apply flex-shrink-0 px-4 py-3 text-sm font-semibold text-gray-600 rounded-xl;
    @apply transition-all duration-300 hover:text-primary hover:bg-primary/5;
    @apply focus:outline-none focus:ring-2 focus:ring-primary focus:ring-opacity-50 focus:ring-offset-1;
  }

  .category-nav-btn.active {
    @apply text-primary bg-primary/10;
  }

  /* Menu category sections */
  .menu-category {
    @apply scroll-mt-36; /* Offset for sticky navigation */
  }

  /* ===== MENU PREVIEW COMPONENTS (Coming Soon) ===== */
  .category-preview-card {
    @apply bg-white rounded-3xl shadow-xl overflow-hidden border border-gray-100;
    @apply transition-all duration-500 hover:shadow-2xl hover:-translate-y-2;
    @apply scroll-margin-top-8; /* For accessibility */
    animation: fadeIn 0.8s ease-in-out both;
  }

  /* Stagger animations for category cards */
  .category-preview-card:nth-child(1) { animation-delay: 0.1s; }
  .category-preview-card:nth-child(2) { animation-delay: 0.2s; }
  .category-preview-card:nth-child(3) { animation-delay: 0.3s; }
  .category-preview-card:nth-child(4) { animation-delay: 0.4s; }
  .category-preview-card:nth-child(5) { animation-delay: 0.5s; }
  .category-preview-card:nth-child(6) { animation-delay: 0.6s; }

  /* Coming soon badges */
  .coming-soon-badge {
    @apply px-4 py-2 rounded-full text-sm font-semibold inline-block;
  }

  /* Category icons with hover effects */
  .category-icon {
    @apply w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6;
    @apply transition-transform duration-300 group-hover:scale-110;
  }

  /* Notification signup button */
  .notify-btn {
    @apply inline-flex items-center justify-center bg-white text-primary;
    @apply px-6 sm:px-8 py-4 rounded-2xl font-bold text-lg;
    @apply transition-all duration-300 hover:scale-105 shine space-x-3;
    @apply w-full sm:w-auto;
    @apply focus:outline-none focus:ring-2 focus:ring-primary focus:ring-opacity-50 focus:ring-offset-2;
  }

  /* Coming soon status indicator */
  .status-indicator {
    @apply w-3 h-3 rounded-full animate-pulse;
  }

  /* Feature highlight cards */
  .feature-highlight {
    @apply text-center;
  }

  .feature-icon {
    @apply w-16 h-16 rounded-2xl flex items-center justify-center mx-auto mb-4;
  }

  /* Enhanced mobile touch targets */
  @media (max-width: 768px) {

    .category-nav-btn {
      min-height: 44px;
      @apply px-4 py-3;
    }

    /* Mobile menu preview */
    .category-preview-card {
      @apply mb-4;
      min-height: 280px;
    }

    .category-preview-card h3 {
      @apply text-xl; 
    }

    .category-preview-card p {
      font-size: 0.95rem;
      line-height: 1.5;
    }

    /* Mobile-specific text gradient display */
    .text-gradient {
      @apply block mt-2;
    }

    /* Larger touch targets for mobile */
    .notify-btn {
      @apply min-h-[48px] text-base;
    }

    .coming-soon-badge {
      @apply text-xs px-3 py-1;
    }
  }

  /* Hero Section Components */
  .hero-background {
    @apply absolute inset-0 z-0;
  }

  .hero-overlay {
    @apply absolute inset-0 bg-black/40 z-10;
  }

  .hero-content {
    @apply relative z-20;
  }

  .hero-badge {
    @apply border-4 border-white px-6 py-2 font-black text-white inline-block;
  }

  .hero-title-main {
    @apply font-black text-white leading-tight mb-4;
    font-size: clamp(2rem, 6vw, 4rem);
  }

  .hero-title-accent {
    @apply font-black text-orange-500 leading-none;
    font-size: clamp(3rem, 8vw, 6rem);
  }

  .hero-subtitle {
    @apply font-bold text-white tracking-widest mb-6;
  }

  .hero-description {
    @apply text-white leading-relaxed mb-8 max-w-2xl;
  }

  
  /* Toast Notifications */
  .toast {
    @apply p-4 rounded-xl shadow-lg text-white text-sm max-w-sm;
    @apply opacity-0 transform translate-y-20 transition-all duration-300 ease-out;
  }
  
  .toast.show {
    @apply opacity-100 translate-y-0;
  }
  
  .toast.success { @apply bg-green-600; }
  .toast.error { @apply bg-red-600; }
  .toast.info { @apply bg-blue-600; }
  .toast.warning { @apply bg-yellow-600; }

  /* Layout Components - Above the Fold */
  .above-fold-container {
    height: 100vh;
    height: 100dvh; 
    @apply flex flex-col overflow-hidden relative;
  }

  .site-header {
    @apply flex-shrink-0 h-16 relative z-50;
  }

  .above-fold-content {
    @apply flex flex-col flex-1 min-h-0;
  }

  .home-section {
    @apply flex-1 relative flex items-center justify-center overflow-hidden min-h-0;
  }

  .loyalty-section-compact {
    @apply flex-shrink-0 bg-white border-t border-b border-gray-200;
    @apply h-16 min-h-16 max-h-16 flex items-center;
    padding-bottom: env(safe-area-inset-bottom, 0px);
  }

  /* Section Spacing */
  .section-padding {
    @apply py-20 lg:py-32;
  }

  .products-section {
    @apply py-20 lg:py-32 bg-white;
  }

  .full-viewport-section {
    height: 100vh;
  }

  .loyalty-section {
    @apply bg-white full-viewport-section flex items-center;
  }

  /* Loyalty Banner Components */
  .loyalty-content {
    @apply flex items-center justify-center w-full h-full;
    gap: 0;
    padding: 0;
  }

  .loyalty-icon {
    @apply w-12 h-12 flex-shrink-0 hidden;
    margin: 0 8px 0 0;
  }

  .loyalty-text {
    @apply text-sm font-black text-brown leading-tight text-center flex-1;
    margin: 0;
    order: 1;
  }

  .sticky-header {
    @apply sticky top-0 z-50;
  }

  /* Form Components */
  .form-error {
    @apply border-red-500 bg-red-50 focus:ring-red-500;
  }

  .error-message {
    @apply text-red-600 text-sm mt-1 font-medium;
  }

  /* Loading Spinner */
  .spinner {
    @apply inline-block w-4 h-4 border-2 border-gray-300 border-t-primary rounded-full;
    animation: spin 1s linear infinite;
  }
}

/* ===== UTILITY OVERRIDES ===== */
@layer utilities {
  /* Custom gradient background */
  .gradient-bg {
    background: linear-gradient(135deg, #1a1a1a 0%, #2a2a2a 100%);
  }

  /* Video styling */
  .bg-video {
    @apply w-full h-full object-cover;
  }

  /* Z-index management */
  .z-header { z-index: 50; }
  .z-cart { z-index: 60; }
  .z-toast { z-index: 70; }

  /* Focus utilities */
  .focus-visible {
    @apply focus:outline-none focus:ring-2 focus:ring-primary focus:ring-opacity-50 focus:ring-offset-2;
  }

  /* Animation utilities */
  .animate-pulse-slow {
    animation: pulse 3s ease-in-out infinite;
  }

  .animate-bounce-subtle {
    animation: bounce-subtle 2s ease-in-out infinite;
  }

  /* Enhanced fade-in animation */
  .fade-in {
    animation: fadeIn 0.8s ease-in-out;
  }

  /* Scroll margin for accessibility */
  .scroll-margin-top-8 {
    scroll-margin-top: 2rem;
  }
}


/* ===== RESPONSIVE BREAKPOINTS ===== */
@media (max-width: 768px) {
  .hero-badge {
    @apply text-lg px-4 py-1;
    border-width: 3px;
  }

  .hero-subtitle {
    @apply text-sm tracking-wide;
  }

  .hero-description {
    @apply text-sm;
  }

  .btn, .btn-secondary {
    @apply px-6 py-3 text-sm;
  }

  .nav-link {
    @apply text-lg py-4 border-b border-gray-100;
  }

  /* Mobile loyalty layout - stack vertically */
  .loyalty-content {
    @apply flex-col;
    padding: 0.5rem 0;
    gap: 0.5rem;
  }

  .loyalty-icon {
    @apply hidden;
  }

  .loyalty-text {
    @apply w-full text-center;
    margin: 0;
    order: 1;
    font-size: 0.75rem;
    line-height: 1.1;
  }


  /* Adjust loyalty section height for mobile */
  .loyalty-section-compact {
    height: auto;
    min-height: 4rem;
    max-height: 5rem;
    padding: 0.5rem 0;
  }

}

/* ===== LANDSCAPE MOBILE ADJUSTMENTS ===== */
@media (max-width: 768px) and (orientation: landscape) {
  .loyalty-section-compact {
    @apply h-16 min-h-16 max-h-16 p-0;
  }

  /* Force horizontal layout in landscape to save space */
  .loyalty-content {
    @apply flex-row items-center px-4;
    gap: 1rem;
  }

  .loyalty-text {
    @apply text-left flex-1;
    font-size: 0.7rem;
    line-height: 1;
    margin: 0;
  }

  /* Ensure above-fold container uses full viewport */
  .above-fold-container {
    height: 100vh;
    height: 100dvh;
  }

  /* Compact hero content for landscape */
  .hero-title-main {
    font-size: clamp(1.5rem, 5vw, 2.5rem);
  }

  .hero-title-accent {
    font-size: clamp(2rem, 6vw, 3.5rem);
  }

  .hero-description {
    @apply text-sm leading-tight;
  }

  .btn, .btn-secondary {
    @apply px-4 py-2 text-xs;
  }
}

/* ===== DESKTOP RESPONSIVE ===== */
@media (min-width: 769px) {
  .loyalty-content {
    @apply flex-row items-center px-8;
    gap: 1rem;
  }

  .loyalty-icon {
    @apply flex;
    width: 40px;
    height: 40px;
    margin: 0;
    order: 1;
  }

  .loyalty-text {
    @apply text-left text-lg flex-1;
    margin: 0;
    order: 2;
  }
}

/* ===== HEADER RESPONSIVE ===== */
@media (min-width: 1024px) {
  .location-picker, .user-actions {
    @apply min-h-12;
  }
}

@media (max-width: 1024px) {
  .mobile-menu {
    @apply top-16;
    height: calc(100vh - 4rem);
  }
}

/* ===== ANIMATIONS ===== */
@keyframes spin {
  to { transform: rotate(360deg); }
}

@keyframes bounce-subtle {
  0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
  40% { transform: translateY(-5px); }
  60% { transform: translateY(-3px); }
}

@keyframes fade-in-up {
  from {
    opacity: 0;
    transform: translateY(30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/*fadeIn animation for menu preview */
@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* ===== PRINT STYLES ===== */
@media print {
  .mobile-menu,
  .loyalty-section-compact,
  #toast-container {
    @apply hidden;
  }
  
  .hero-background video {
    @apply hidden;
  }
  
  body {
    @apply text-black bg-white;
  }
}
